<div layout="column" ng-cloak class="md-inline-form">

  <div layout="column" ng-cloak class="md-inline-form">

    <md-content layout-padding>
      <div>
        <form name="stockForm">
          <fieldset>
            <legend>
              Pedido
            </legend>

            <div layout="row">
              <md-input-container class="md-block" flex>
                <label>Cliente</label>
                <md-select ng-model="$ctrl.sale.customer">
                  <md-option ng-repeat="customer in $ctrl.customers track by customer.id" ng-value="customer">
                    {{customer.name}}
                  </md-option>
                </md-select>
              </md-input-container>
              <md-datepicker ng-model="$ctrl.sale.date" md-placeholder="Data de entrada" flex/>
            </div>

          </fieldset>

          <hr/>

          <fieldset>
            <legend>
              Itens
            </legend>

            <div layout="row">
              <div layout="column" flex="4">
                <md-input-container class="md-block" flex>
                  <label>Item</label>
                  <md-select ng-model="$ctrl.item.product" ng-change="$ctrl.productChanged($ctrl.item.product)">
                    <md-option ng-repeat="product in $ctrl.products track by product.id" ng-value="product">
                      {{product.name}}
                    </md-option>
                  </md-select>
                </md-input-container>
                <md-input-container class="md-block" flex>
                  <label>Quantidade</label>
                  <input type="number" ng-model="$ctrl.item.quantity" required>
                </md-input-container>
                <md-input-container class="md-block" flex>
                  <label>Valor Unitario</label>
                  <input type="number" ng-model="$ctrl.item.value" required>
                </md-input-container>
                <div layout="row" layout-align="end start">
                  <md-button class="md-raised md-primary" ng-click="$ctrl.addItem()">Adicionar</md-button>
                </div>
              </div>
              <div layout="column" flex="8">
                <!-- exact table from live demo -->
                <md-table-container>
                  <table md-table>
                    <thead md-head>
                    <tr md-row>
                      <th md-column>#</th>
                      <th md-column>Item</th>
                      <th md-column>Quantidade</th>
                      <th md-column>Valor Unitario</th>
                      <th md-column>Ações</th>
                    </tr>
                    </thead>
                    <tbody md-body>
                    <tr md-row ng-repeat="stockItem in $ctrl.sale.items track by $index">
                      <td md-cell>{{$index+1}}</td>
                      <td md-cell>{{stockItem.product.name}}</td>
                      <td md-cell>{{stockItem.quantity}}</td>
                      <td md-cell>{{stockItem.value}}</td>
                      <td md-cell>
                        <md-button class="md-icon-button md-" ng-click="$ctrl.sale.items.splice($index, 1)">
                          <md-icon>remove_circle_outline</md-icon>
                        </md-button>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </md-table-container>
              </div>


            </div>


          </fieldset>

          <div layout="row" layout-align="end">
            <md-button class="md-raised md-primary" ng-click="$ctrl.save()">Salvar</md-button>
          </div>
        </form>
      </div>
    </md-content>
  </div>


</div>
